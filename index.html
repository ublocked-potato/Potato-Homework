<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Classroom</title>
<link rel="icon" href="https://ssl.gstatic.com/classroom/favicon.png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#1a0033 0%,#2d1b69 25%,#4a0e6a 50%,#2d1b69 75%,#1a0033 100%);color:white;min-height:100vh;overflow:hidden;}

.browser{position:relative;width:100vw;height:100vh;display:flex;flex-direction:column;}
.browser-header{height:50px;background:rgba(0,0,0,0.3);backdrop-filter:blur(20px);display:flex;align-items:center;padding:0 20px;justify-content:space-between;flex-shrink:0;}
.tabs{display:flex;align-items:center;gap:5px;flex:1;overflow-x:auto;}
.tab{display:flex;align-items:center;gap:8px;padding:8px 12px;background:rgba(255,255,255,0.1);border-radius:20px;font-size:14px;cursor:pointer;white-space:nowrap;}
.tab.active{background:rgba(255,255,255,0.2);}
.add-tab-btn{width:40px;height:40px;background:rgba(255,255,255,0.3);border:none;border-radius:10px;color:white;font-size:20px;cursor:pointer;}

.toolbar{height:70px;background:rgba(0,0,0,0.4);backdrop-filter:blur(20px);display:flex;align-items:center;padding:0 20px;gap:15px;flex-shrink:0;}
.nav-btn,.settings-btn{width:40px;height:40px;background:rgba(255,255,255,0.2);border:none;border-radius:10px;color:white;font-size:16px;cursor:pointer;transition:all 0.3s;}
.nav-btn:hover,.settings-btn:hover{background:rgba(255,255,255,0.3);transform:scale(1.05);}
.address-bar-container{flex:1;max-width:600px;position:relative;}
.address-bar-input{width:100%;height:45px;padding:0 120px 0 20px;border:2px solid rgba(255,255,255,0.3);border-radius:25px;background:rgba(255,255,255,0.1);color:white;font-size:16px;}
.engine-selector{position:absolute;right:10px;top:50%;transform:translateY(-50%);display:flex;gap:5px;}
.engine-btn{padding:6px 12px;background:rgba(255,255,255,0.15);border:none;border-radius:15px;color:rgba(255,255,255,0.7);font-size:11px;cursor:pointer;font-weight:600;}
.engine-btn.active{background:linear-gradient(135deg,#8a2be2,#9300ea);color:white;}

.browser-content{flex:1;overflow:hidden;position:relative;}
.content-view{display:none;width:100%;height:100%;position:absolute;top:0;left:0;}
.content-view.active{display:block;}

.new-tab-page{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center;overflow-y:auto;height:100%;}
.search-container{position:relative;width:100%;max-width:600px;margin:40px 0;}
.main-search-input{width:100%;height:65px;padding:0 70px 0 25px;border:2px solid rgba(255,255,255,0.4);border-radius:35px;background:rgba(255,255,255,0.15);color:white;font-size:18px;font-weight:500;}
.search-icon{position:absolute;right:15px;top:50%;transform:translateY(-50%);width:45px;height:45px;background:linear-gradient(135deg,#8a2be2,#9300ea);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;}

.reviews-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;max-width:900px;margin:40px 0;}
.review-card{background:rgba(255,255,255,0.1);border-radius:20px;padding:25px;border:1px solid rgba(255,255,255,0.2);transition:all 0.3s;}
.review-card:hover{transform:translateY(-5px);}

.search-results-container{padding:40px 20px 100px;overflow-y:auto;height:100%;}
.results-header{background:rgba(0,0,0,0.5);padding:15px;border-radius:15px;margin-bottom:30px;}
.back-btn{background:linear-gradient(135deg,#8a2be2,#9300ea);color:white;border:none;padding:10px 20px;border-radius:20px;cursor:pointer;}
.result-item{background:rgba(255,255,255,0.1);border-radius:20px;padding:25px;margin:25px 0;cursor:pointer;transition:all 0.3s;}
.result-item:hover{background:rgba(255,255,255,0.15);}
.result-title{font-size:18px;font-weight:600;color:#a78bfa;margin-bottom:8px;}
.result-url{color:rgba(255,255,255,0.8);font-family:monospace;font-size:14px;margin-bottom:12px;}

.proxy-frame{width:100%;height:100%;border:none;}
.loading-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;}
.loading-spinner{width:60px;height:60px;border:4px solid rgba(255,255,255,0.3);border-top:4px solid #8a2be2;border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{to{transform:rotate(360deg);}}

.settings-modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;align-items:center;justify-content:center;}
.settings-modal.active{display:flex;}
.settings-content{background:linear-gradient(135deg,#2d1b69,#4a0e6a);border-radius:30px;padding:40px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;}
.settings-header{display:flex;justify-content:space-between;margin-bottom:30px;}
.settings-close{background:none;border:none;color:white;font-size:32px;cursor:pointer;}
.setting-group{margin-bottom:30px;}
.setting-group h3{margin-bottom:15px;color:#a78bfa;}
.setting-option{background:rgba(255,255,255,0.1);padding:15px;border-radius:15px;margin-bottom:10px;cursor:pointer;}
.setting-option:hover{background:rgba(255,255,255,0.15);}
.setting-option.active{background:rgba(138,43,226,0.3);border:2px solid #8a2be2;}
.powered-by{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.4);padding:12px 25px;border-radius:30px;z-index:1000;}
</style>
</head>
<body>
<div class="browser">
<div class="browser-header">
<div class="tabs" id="tabsContainer">
<div class="tab active" data-tab-id="home">
<span style="font-size:20px;">ü•î</span>
<span class="tab-title">OmniSearch</span>
</div>
</div>
<button class="add-tab-btn">+</button>
</div>

<div class="toolbar">
<button class="nav-btn"><i class="fas fa-arrow-left"></i></button>
<button class="nav-btn"><i class="fas fa-arrow-right"></i></button>
<button class="nav-btn"><i class="fas fa-redo"></i></button>
<button class="settings-btn"><i class="fas fa-cog"></i></button>
<div class="address-bar-container">
<input type="text" class="address-bar-input" id="addressBar" placeholder="Search or enter URL">
<div class="engine-selector">
<button class="engine-btn active" data-engine="duckduckgo">DDG</button>
<button class="engine-btn" data-engine="google">Google</button>
<button class="engine-btn" data-engine="brave">Brave</button>
<button class="engine-btn" data-engine="startpage">Start</button>
</div>
</div>
</div>

<div class="browser-content" id="browserContent">
<div class="content-view active" id="view-home">
<div class="new-tab-page">
<div style="font-size:120px;margin-bottom:20px;">ü•î</div>
<h1 style="font-size:36px;font-weight:700;margin-bottom:10px;">OmniSearch</h1>
<p style="opacity:0.9;font-size:18px;margin-bottom:20px;">Python-Powered ‚Ä¢ Protocol Switching ‚Ä¢ DPI Evasion ü•î</p>

<div class="search-container">
<input type="text" class="main-search-input" id="mainSearch" placeholder="üîç Search with advanced bypass...">
<div class="search-icon">üîç</div>
</div>

<div class="reviews-grid">
<div class="review-card">
<div style="font-size:24px;margin-bottom:15px;">üêç</div>
<p><strong>Python Backend</strong></p>
<p style="font-size:14px;opacity:0.8;margin-top:8px;">Server-side scraping & bypass</p>
</div>
<div class="review-card">
<div style="font-size:24px;margin-bottom:15px;">üîÑ</div>
<p><strong>Protocol Switching</strong></p>
<p style="font-size:14px;opacity:0.8;margin-top:8px;">HTTP/HTTPS auto-fallback</p>
</div>
<div class="review-card">
<div style="font-size:24px;margin-bottom:15px;">üõ°Ô∏è</div>
<p><strong>DPI Resistant</strong></p>
<p style="font-size:14px;opacity:0.8;margin-top:8px;">2026 evasion techniques</p>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="powered-by">ü•î Python Backend ‚Ä¢ Advanced Bypass</div>

<div class="settings-modal" id="settingsModal">
<div class="settings-content">
<div class="settings-header">
<h2>‚öôÔ∏è Settings</h2>
<button class="settings-close">√ó</button>
</div>
<div class="setting-group">
<h3>üè† Proxy Homepage</h3>
<div class="setting-option active" data-homepage="blank">
<strong>Blank Page</strong>
<p style="font-size:13px;opacity:0.8;margin-top:5px;">Maximum stealth</p>
</div>
<div class="setting-option" data-homepage="google">
<strong>Google</strong>
<p style="font-size:13px;opacity:0.8;margin-top:5px;">Google homepage</p>
</div>
<div class="setting-option" data-homepage="classroom">
<strong>Google Classroom</strong>
<p style="font-size:13px;opacity:0.8;margin-top:5px;">Classroom disguise</p>
</div>
</div>
</div>
</div>

<script>
let currentEngine=localStorage.getItem('searchEngine')||'duckduckgo';
let proxyHomepage=localStorage.getItem('proxyHomepage')||'blank';

document.querySelector('.settings-btn').onclick=()=>document.getElementById('settingsModal').classList.add('active');
document.querySelector('.settings-close').onclick=()=>document.getElementById('settingsModal').classList.remove('active');

document.querySelectorAll('.engine-btn').forEach(btn=>{
btn.onclick=()=>{
currentEngine=btn.dataset.engine;
localStorage.setItem('searchEngine',currentEngine);
document.querySelectorAll('.engine-btn').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
};
});

document.querySelectorAll('[data-homepage]').forEach(opt=>{
opt.onclick=()=>{
proxyHomepage=opt.dataset.homepage;
localStorage.setItem('proxyHomepage',proxyHomepage);
document.querySelectorAll('[data-homepage]').forEach(o=>o.classList.remove('active'));
opt.classList.add('active');
};
});

document.querySelector('.search-icon').onclick=performSearch;
document.getElementById('mainSearch').onkeypress=e=>{if(e.key==='Enter')performSearch();};
document.getElementById('addressBar').onkeypress=e=>{if(e.key==='Enter')searchOrNavigate();};

async function performSearch(){
const query=document.getElementById('mainSearch').value.trim();
if(!query)return;

const view=document.getElementById('view-home');
view.innerHTML='<div class="loading-overlay"><div class="loading-spinner"></div><div style="margin-top:20px;">ü•î Python Backend Searching...</div></div>';

try{
const response=await fetch(`/api/search?q=${encodeURIComponent(query)}&engine=${currentEngine}`);
const data=await response.json();

if(!data.success||!data.results||data.results.length===0){
view.innerHTML='<div style="padding:100px 20px;text-align:center;"><div style="font-size:72px;">ü•î</div><h2>No Results Found</h2><p>Try another engine</p><button class="back-btn" onclick="location.reload()">‚Üê Try Again</button></div>';
return;
}

const resultsHtml=data.results.map(r=>`<div class="result-item" onclick="openProxy('${r.url.replace(/'/g,"\\'")}')">
<div class="result-title">${escapeHtml(r.title)}</div>
<div class="result-url">${escapeHtml(r.display_url)}</div>
<div class="result-snippet">${escapeHtml(r.snippet)}</div>
</div>`).join('');

view.innerHTML=`<div class="search-results-container">
<div class="results-header">
<button class="back-btn" onclick="location.reload()">‚Üê New Search</button>
<span style="color:rgba(255,255,255,0.8);margin-left:20px;">${data.results.length} results ‚Ä¢ ${currentEngine}</span>
</div>${resultsHtml}</div>`;

}catch(e){
console.error('Search error:',e);
view.innerHTML='<div style="padding:100px 20px;text-align:center;"><div style="font-size:72px;">ü•î</div><h2>Backend Error</h2><p>Make sure Python server is running</p><button class="back-btn" onclick="location.reload()">‚Üê Back</button></div>';
}
}

function searchOrNavigate(){
const input=document.getElementById('addressBar').value.trim();
if(!input)return;
if(input.match(/^https?:\/\//i)||input.match(/^[^\s]+\.[^\s]+$/)){
openProxy(input.startsWith('http')?input:'https://'+input);
}else{
document.getElementById('mainSearch').value=input;
performSearch();
}
}

function openProxy(url){
// Detect complex sites that won't work well in proxy
const complexSites=['chatgpt.com','openai.com','perplexity.ai','poki.com','youtube.com','netflix.com','discord.com','spotify.com','twitch.tv','roblox.com'];
const isComplex=complexSites.some(site=>url.toLowerCase().includes(site));

if(isComplex){
// Show warning modal
const view=document.getElementById('view-home');
view.innerHTML=`
<div style="padding:60px 20px;text-align:center;overflow-y:auto;height:100%;">
<div style="font-size:92px;margin-bottom:20px;">‚ö†Ô∏è</div>
<h1 style="font-size:32px;margin-bottom:20px;">Complex Site Detected</h1>
<p style="font-size:18px;opacity:0.9;margin-bottom:30px;max-width:600px;margin-left:auto;margin-right:auto;">
This site uses advanced features (WebSockets, WebGL, AI APIs) that won't work properly in a proxy.
</p>
<div style="background:rgba(255,255,255,0.1);padding:20px;border-radius:20px;margin:30px auto;max-width:500px;">
<p style="font-size:14px;opacity:0.8;margin-bottom:10px;">Site:</p>
<p style="font-family:monospace;font-size:14px;color:#a78bfa;word-break:break-all;">${url}</p>
</div>
<div style="display:flex;gap:15px;justify-content:center;flex-wrap:wrap;margin-top:30px;">
<button onclick="window.open('${url}','_blank')" 
style="background:linear-gradient(135deg,#8a2be2,#9300ea);color:white;border:none;padding:15px 30px;border-radius:25px;font-weight:600;font-size:16px;cursor:pointer;">
üåê Visit Real Site
</button>
<button onclick="tryProxyAnyway('${url}')" 
style="background:rgba(255,255,255,0.2);color:white;border:none;padding:15px 30px;border-radius:25px;font-weight:600;font-size:16px;cursor:pointer;">
Try Proxy Anyway
</button>
<button onclick="location.reload()" 
style="background:rgba(255,255,255,0.1);color:white;border:none;padding:15px 30px;border-radius:25px;font-weight:600;font-size:16px;cursor:pointer;">
‚Üê Back
</button>
</div>
<div style="margin-top:40px;padding:20px;background:rgba(138,43,226,0.2);border-radius:15px;max-width:600px;margin-left:auto;margin-right:auto;">
<p style="font-size:14px;margin-bottom:10px;"><strong>üí° Why complex sites don't work:</strong></p>
<ul style="text-align:left;font-size:13px;opacity:0.8;line-height:1.8;padding-left:20px;">
<li><strong>ChatGPT/Perplexity:</strong> Need WebSocket real-time connections</li>
<li><strong>Poki Games:</strong> Require Canvas, WebGL & complex JavaScript</li>
<li><strong>YouTube:</strong> Video streaming + DRM protection</li>
<li><strong>Discord/Spotify:</strong> Real-time audio/WebRTC</li>
</ul>
</div>
<p style="font-size:12px;opacity:0.6;margin-top:30px;">
ü•î Tip: For best experience with these sites, use a VPN or access directly
</p>
</div>`;
return;
}

// Regular proxy for simple sites
const view=document.getElementById('view-home');
const encoded=btoa(url);
view.innerHTML=`<div class="loading-overlay"><div class="loading-spinner"></div><div style="margin-top:20px;">Loading via Python...</div></div><iframe class="proxy-frame" src="/api/proxy?url=${encoded}" onload="this.previousElementSibling.remove()"></iframe>`;
}

function tryProxyAnyway(url){
const view=document.getElementById('view-home');
const encoded=btoa(url);
view.innerHTML=`<div class="loading-overlay"><div class="loading-spinner"></div><div style="margin-top:20px;">Loading (may not work)...</div></div><iframe class="proxy-frame" src="/api/proxy?url=${encoded}" onload="this.previousElementSibling.remove()"></iframe>`;
}

function escapeHtml(text){
const div=document.createElement('div');
div.textContent=text;
return div.innerHTML;
}

document.querySelectorAll('.engine-btn').forEach(btn=>{
if(btn.dataset.engine===currentEngine)btn.classList.add('active');
else btn.classList.remove('active');
});
</script>
</body>
</html>
